<script init>
    p.data = await session.explore()
</script>

<template>
    <ul class="users"></ul>
</template>

<style>
    .p { padding: 1em !important }
    .users { display: grid; padding: 1em; grid-template-columns: 1fr 1fr 1fr; gap: 1em }
    .users li { display: flex; padding: .5em; position: relative; outline: .125em solid var(--bd-1); border-radius: .5em; font-size: 1.25em; align-items: center; overflow: hidden }
    .users  li:before { content: ''; display: block; width: 100%; height: 100%; inset: 0; position: absolute; z-index: -1; background: no-repeat center center; background-size: cover; opacity: .25 }
    .users  li:hover { cursor: pointer }
    .users img { width: 2em; height: 2em; margin-right: .5em; border-radius: 50% }
    .p ul {  margin: 0  }
    .p ul:last-of-type {  padding: 2em .5em  }
    @media (max-width: 1050px) { .users { grid-template-columns: 1fr 1fr } }
    @media (max-width: 750px) { .users { grid-template-columns: 1fr } }
</style>

<script>
    p.users = p.querySelector('.users')
    p.posts = metw.gui.posts(p.data.posts)
    p.appendChild(p.posts)

    for (let user of p.data.users) {
        let _user = d.createElement('li'); _user.className = `users-${user.id}`
        _user.innerHTML = `<img src="${user.avatarURL}" />${user.displayName}<style>.users-${user.id}:before { background-image: url("${user.bannerURL}") !important }</style>`
        _user.onclick = () => app.redirect(`/@${user.name}`)
        p.users.appendChild(_user)
    } 
</script>